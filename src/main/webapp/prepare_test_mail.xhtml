<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
            xmlns:h="http://xmlns.jcp.org/jsf/html"
            xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
            xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
    <ui:composition template="templates/site.xhtml">
        <ui:define name="title">Send test mail &#8212; gorillamail</ui:define>
        <ui:define name="site">
            <div class="container">
                <h:form>
                    <div class="grid">
                        <div class="row">
                            <div class="col-md-8">
                                <h2>Variables</h2>
                            </div>
                            <div class="col-md-2">
                                <h:commandButton styleClass="btn btn-outline-secondary full-width" value="Add variable" action="#{mailBean.addVariable()}" />
                            </div>
                            <div class="col-md-2">
                                <h:commandButton styleClass="btn btn-outline-primary full-width" value="Send" action="#{mailBean.sendMail(userBean.loggedInUser)}" />
                            </div>
                        </div>
                        
                        <div class="row">
                            <br />
                        </div>

                        <ui:fragment rendered="#{mailBean.error.length() > 0}">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="alert alert-danger">
                                        Oops, something went wrong (#{mailBean.error}).
                                    </div>
                                    <br />
                                </div>
                            </div>
                        </ui:fragment>

                        <ui:repeat var="variable" value="#{mailBean.variables}">
                            <div class="form-group row">
                                <div class="col-md-6">
                                    <h:inputText styleClass="form-control" value="#{variable.name}" a:placeholder="Variable name" />
                                </div>
                                <div class="col-md-6">
                                    <h:inputText styleClass="form-control" value="#{variable.value}" a:placeholder="Value" />
                                </div>
                            </div>
                        </ui:repeat>
                    </div>
                </h:form>
            </div>
        </ui:define>
    </ui:composition>
</html>
